!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Tracking=t():e.Tracking=t()}(this,(()=>(()=>{"use strict";var e={d:(t,r)=>{for(var a in r)e.o(r,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:r[a]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},t={};e.d(t,{default:()=>i});class r{constructor(){}events_=null;addListener(e,t){if("function"!=typeof t)throw new TypeError("Listener must be a function");return this.events_||(this.events_={}),this.emit("newListener",e,t),this.events_[e]||(this.events_[e]=[]),this.events_[e].push(t),this}listeners(e){return this.events_&&this.events_[e]}emit(e,...t){var r=this.listeners(e);if(r){for(var a=Array.prototype.slice.call(arguments,1),n=0;n<r.length;n++)r[n]&&r[n].apply(this,a);return!0}return!1}on=this.addListener;once(e,t){var r=this;r.on(e,(function a(){r.removeListener(e,a),t.apply(this,arguments)}))}removeAllListeners(e){return this.events_?(e?delete this.events_[e]:delete this.events_,this):this}removeListener(e,t){if("function"!=typeof t)throw new TypeError("Listener must be a function");if(!this.events_)return this;var r=this.listeners(e);if(Array.isArray(r)){var a=r.indexOf(t);if(a<0)return this;r.splice(a,1)}return this}setMaxListeners(){throw new Error("Not implemented")}}class a{constructor(){}static loadImage(e,t,r,a,n,o,i){var s=this,l=new window.Image;l.crossOrigin="*",l.onload=function(){var t=e.getContext("2d");e.width=n,e.height=o,t.drawImage(l,r,a,n,o),i&&i.call(s),l=null},l.src=t}}class n{constructor(){}blur(e,t,r,a){if((a=Math.abs(a))<=1)throw new Error("Diameter should be greater than 1.");for(var n=a/2,o=Math.ceil(a)+(1-Math.ceil(a)%2),i=new Float32Array(o),s=(n+.5)/3,l=s*s,h=1/Math.sqrt(2*Math.PI*l),v=-1/(2*s*s),u=0,c=Math.floor(o/2),f=0;f<o;f++){var d=f-c,p=h*Math.exp(d*d*v);i[f]=p,u+=p}for(var m=0;m<i.length;m++)i[m]/=u;return this.separableConvolve(e,t,r,i,i,!1)}computeIntegralImage(e,t,r,a,n,o,i){if(arguments.length<4)throw new Error("You should specify at least one output array in the order: sum, square, tilted, sobel.");var s;i&&(s=this.sobel(e,t,r));for(var l=0;l<r;l++)for(var h=0;h<t;h++){var v=l*t*4+4*h,u=~~(.299*e[v]+.587*e[v+1]+.114*e[v+2]);if(a&&this.computePixelValueSAT_(a,t,l,h,u),n&&this.computePixelValueSAT_(n,t,l,h,u*u),o){var c=v-4*t,f=~~(.299*e[c]+.587*e[c+1]+.114*e[c+2]);this.computePixelValueRSAT_(o,t,l,h,u,f||0)}i&&this.computePixelValueSAT_(i,t,l,h,s[v])}}computePixelValueRSAT_(e,t,r,a,n,o){var i=r*t+a;e[i]=(e[i-t-1]||0)+(e[i-t+1]||0)-(e[i-t-t]||0)+n+o}computePixelValueSAT_(e,t,r,a,n){var o=r*t+a;e[o]=(e[o-t]||0)+(e[o-1]||0)+n-(e[o-t-1]||0)}grayscale(e,t,r,a){for(var n=new Uint8ClampedArray(a?e.length:e.length>>2),o=0,i=0,s=0;s<r;s++)for(var l=0;l<t;l++){var h=.299*e[i]+.587*e[i+1]+.114*e[i+2];n[o++]=h,a&&(n[o++]=h,n[o++]=h,n[o++]=e[i+3]),i+=4}return n}horizontalConvolve(e,t,r,a,n){for(var o=a.length,i=Math.floor(o/2),s=new Float32Array(t*r*4),l=n?1:0,h=0;h<r;h++)for(var v=0;v<t;v++){for(var u=h,c=v,f=4*(h*t+v),d=0,p=0,m=0,g=0,y=0;y<o;y++){var w=4*(u*t+Math.min(t-1,Math.max(0,c+y-i))),b=a[y];d+=e[w]*b,p+=e[w+1]*b,m+=e[w+2]*b,g+=e[w+3]*b}s[f]=d,s[f+1]=p,s[f+2]=m,s[f+3]=g+l*(255-g)}return s}verticalConvolve(e,t,r,a,n){for(var o=a.length,i=Math.floor(o/2),s=new Float32Array(t*r*4),l=n?1:0,h=0;h<r;h++)for(var v=0;v<t;v++){for(var u=h,c=v,f=4*(h*t+v),d=0,p=0,m=0,g=0,y=0;y<o;y++){var w=4*(Math.min(r-1,Math.max(0,u+y-i))*t+c),b=a[y];d+=e[w]*b,p+=e[w+1]*b,m+=e[w+2]*b,g+=e[w+3]*b}s[f]=d,s[f+1]=p,s[f+2]=m,s[f+3]=g+l*(255-g)}return s}separableConvolve(e,t,r,a,n,o){var i=this.verticalConvolve(e,t,r,n,o);return this.horizontalConvolve(i,t,r,a,o)}sobel(e,t,r){for(var a=this.grayscale(e,t,r,!0),n=new Float32Array(t*r*4),o=new Float32Array([-1,0,1]),i=new Float32Array([1,2,1]),s=this.separableConvolve(a,t,r,o,i),l=this.separableConvolve(a,t,r,i,o),h=0;h<n.length;h+=4){var v=s[h],u=l[h],c=Math.sqrt(u*u+v*v);n[h]=c,n[h+1]=c,n[h+2]=c,n[h+3]=255}return n}equalizeHist(e,t,r){for(var a=new Uint8ClampedArray(e.length),n=new Array(256),o=0;o<256;o++)n[o]=0;for(o=0;o<e.length;o++)a[o]=e[o],n[e[o]]++;var i=n[0];for(o=0;o<256;o++)n[o]+=i,i=n[o];var s=255/e.length;for(o=0;o<e.length;o++)a[o]=n[e[o]]*s+.5|0;return a}}class o{static EventEmitter;static Canvas;static Image;constructor(){}initUserMedia_(e,t){window.navigator.mediaDevices.getUserMedia({video:!0,audio:!(!t||!t.audio)}).then((function(t){e.srcObject=t})).catch((function(e){throw Error("Cannot capture user camera.")}))}isNode(e){return e.nodeType||this.isWindow(e)}isWindow(e){return!!(e&&e.alert&&e.document)}one(e,t){return this.isNode(e)?e:(t||document).querySelector(e)}EventEmitter=r;Canvas=a;Image=n}o.EventEmitter=r,o.Canvas=a,o.Image=n;const i={Tracking:o};return t.default})()));