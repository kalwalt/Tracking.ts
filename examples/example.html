<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        .rect {
          width: 80px;
          height: 80px;
          position: absolute;
          left: -1000px;
          top: -1000px;
        }
        </style>
</head>
<body>
    <div class="demo-frame">
        <div class="demo-container">
          <img id="img" src="./psmove.png" />
        </div>
      </div>
    
    <script src="../dist/tracking.js"></script>
    <script>
        console.log(Tracking);
        var t = new Tracking.Tracking();
        console.log(t);

        var tracker = new t.ColorTracker(['magenta','cyan', 'yellow']);

tracker.on('track', function(event) {
  event.data.forEach(function(rect) {
    window.plot(rect.x, rect.y, rect.width, rect.height, rect.color);
  });
});

t.track('#img', tracker);

window.plot = function(x, y, w, h, color) {
        var rect = document.createElement('div');
        document.querySelector('.demo-container').appendChild(rect);
        rect.classList.add('rect');
        rect.style.border = '2px solid ' + color;
        rect.style.width = w + 'px';
        rect.style.height = h + 'px';
        rect.style.left = (img.offsetLeft + x) + 'px';
        rect.style.top = (img.offsetTop + y) + 'px';
      };
        
        //t.track('#pinball', new t.ColorTracker("magenta"))
        /*fetch('./pinball.jpg').then((response)=>{
            if (!response.ok) {
          throw new Error("Network response was not OK");
        }
        return response.arrayBuffer();
        })
        .then((buff) => {
        let buffer = new Uint8Array(buff);
        var gray = t.Image.grayscale(buffer, 710, 1024, true)
        console.log(gray);
        var canvas = document.createElement('canvas');
        canvas.width = 710
        canvas.height = 1024
        var context = canvas.getContext('2d');
        var imageData = context.createImageData(710, 1024);
        console.log(imageData);
        imageData.data.set(gray);
        console.log(imageData);
        context.putImageData(imageData, 0, 0);
        document.body.appendChild(canvas);
      })*/

    </script>
</body>
</html>